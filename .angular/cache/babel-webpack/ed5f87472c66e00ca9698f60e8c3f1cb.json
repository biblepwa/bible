{"ast":null,"code":"import { DOCUMENT } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../bible.service\";\nimport * as i2 from \"../history.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\n\nfunction ChapterNumbersComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"p\");\n    i0.ɵɵtext(2, \"Chapter number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ChapterNumbersComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"p\");\n    i0.ɵɵtext(2, \"Psalm number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c0 = function () {\n  return [\"book\"];\n};\n\nfunction ChapterNumbersComponent_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 5);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const chapters_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"fragment\", chapters_r4.chapter);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(3, _c0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", chapters_r4.chapter, \" \");\n  }\n}\n\nexport let ChapterNumbersComponent = /*#__PURE__*/(() => {\n  class ChapterNumbersComponent {\n    constructor(bibleService, historyService, document) {\n      this.bibleService = bibleService;\n      this.historyService = historyService;\n      this.document = document;\n    }\n\n    ngAfterViewInit() {\n      // highlight chapters on scroll\n      const chapters = this.document.querySelectorAll(\"section\");\n      const chaptersGrid = this.document.getElementsByClassName(\"chapters\");\n      const options = {\n        root: null,\n        threshold: [0],\n        rootMargin: \"-50%\" //highlight multiple chapters if visible\n\n      };\n      this.observer = new IntersectionObserver(function (entries) {\n        entries.forEach(entry => {\n          let chapter = entry.target.querySelector(\"div\").id;\n\n          if (entry.isIntersecting) {\n            chaptersGrid[Number(chapter) - 1].classList.add(\"chapterScroll\");\n          } else {\n            chaptersGrid[Number(chapter) - 1].classList.remove(\"chapterScroll\");\n          } //block: \"nearest\" is essential to stop page moving!\n\n\n          chaptersGrid[Number(localStorage.getItem('curChap')) - 1].scrollIntoView({\n            block: \"nearest\"\n          });\n        });\n      }, options);\n      chapters.forEach(chapter => {\n        this.observer.observe(chapter);\n      });\n    }\n\n    ngOnDestroy() {\n      this.observer.disconnect();\n    }\n\n  }\n\n  ChapterNumbersComponent.ɵfac = function ChapterNumbersComponent_Factory(t) {\n    return new (t || ChapterNumbersComponent)(i0.ɵɵdirectiveInject(i1.BibleService), i0.ɵɵdirectiveInject(i2.HistoryService), i0.ɵɵdirectiveInject(DOCUMENT));\n  };\n\n  ChapterNumbersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ChapterNumbersComponent,\n    selectors: [[\"app-chapter-numbers\"]],\n    decls: 9,\n    vars: 3,\n    consts: [[1, \"chaptersShow\", 3, \"click\"], [4, \"ngIf\", \"ngIfElse\"], [\"notChapter\", \"\"], [1, \"chapterGrid\"], [4, \"ngFor\", \"ngForOf\"], [1, \"chapters\", 3, \"routerLink\", \"fragment\"]],\n    template: function ChapterNumbersComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵlistener(\"click\", function ChapterNumbersComponent_Template_div_click_0_listener() {\n          return ctx.bibleService.showChapters = !ctx.bibleService.showChapters;\n        });\n        i0.ɵɵelement(1, \"hr\");\n        i0.ɵɵtemplate(2, ChapterNumbersComponent_div_2_Template, 3, 0, \"div\", 1);\n        i0.ɵɵtemplate(3, ChapterNumbersComponent_ng_template_3_Template, 3, 0, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelement(5, \"hr\");\n        i0.ɵɵelementStart(6, \"div\", 3);\n        i0.ɵɵtemplate(7, ChapterNumbersComponent_ng_container_7_Template, 3, 4, \"ng-container\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(8, \"hr\");\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(4);\n\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.bibleService.title != \"Psalms\")(\"ngIfElse\", _r1);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.bibleService.bible[ctx.bibleService.testament].books[ctx.bibleService.bookSelected].chapters);\n      }\n    },\n    directives: [i3.NgIf, i3.NgForOf, i4.RouterLink],\n    styles: [\"[_ngcontent-%COMP%]:root{--nav: #ccc;--paper: #fff;--gridColor: #eee;--searchHighlight: #ccc;--ink: #000;--zPaper: #bbb;--zInk: #111;--scriptNum: #777;--button: #999;--buttonActive: #ddd;--buttonBorder: #777;--darkRed: #4b0101;--lightRed: #8A0707}html[dataTheme=dark][_ngcontent-%COMP%]{--nav: #444;--paper: #000;--gridColor: #111;--searchHighlight: #333;--ink: #fff;--zPaper: #333;--zInk: #ddd;--button: #777;--scriptNum: #777;--buttonActive: #aaa;--buttonBorder: #333;--darkRed: #4b0101;--lightRed: #8A0707}html[_ngcontent-%COMP%]{scroll-behavior:smooth}body[_ngcontent-%COMP%]{color:var(--ink);background-color:var(--paper);margin:auto;font-size:1.1rem}hr[_ngcontent-%COMP%]{border-color:var(--lightRed)}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{font-family:Georgia,\\\"Times New Roman\\\",Times,serif;font-weight:normal}.chaptersShow[_ngcontent-%COMP%]{z-index:3;background-color:var(--zPaper);border:0 1px 1px 1px solid var(--ink);box-shadow:0 12px 7px -7px var(--zPaper);color:var(--zInk);text-align:center;width:12rem;position:absolute;left:50%;transform:translate(-50%);display:block;top:2.2em}.chaptersShow[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:.7rem}.chaptersShow[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.chapterGrid[_ngcontent-%COMP%]{max-height:50vh;overflow-y:auto;overscroll-behavior:contain;display:grid;padding:.7rem 0;grid-gap:1rem;grid-template-columns:repeat(auto-fit,2.4rem);justify-content:center}.chapters[_ngcontent-%COMP%]{border:1px solid var(--buttonBorder);padding:.33rem 0;height:1.2rem;line-height:1.2rem;background-color:var(--button);cursor:pointer;color:var(--ink);transition:.1s}.chapters[_ngcontent-%COMP%]:hover, .chapters[_ngcontent-%COMP%]:focus, .chapters[_ngcontent-%COMP%]:active{border:1px solid var(--button);color:var(--darkRed);font-weight:bold;background-color:var(--buttonActive)}.chapterScroll[_ngcontent-%COMP%]{border:1px solid var(--button);color:var(--darkRed);font-weight:bold;background-color:var(--buttonActive)}\"]\n  });\n  return ChapterNumbersComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}